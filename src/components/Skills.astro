---
const skillCategories = [
  {
    title: "Backend & Lenguajes",
    icon: "‚öôÔ∏è",
    skills: [
      { name: "JavaScript (ES6+)", level: 90 },
      { name: "TypeScript", level: 85 },
      { name: "Node.js", level: 90 },
      { name: "NestJS", level: 85 },
      { name: "PHP", level: 80 },
      { name: "Python", level: 75 },
    ]
  },
  {
    title: "Frontend",
    icon: "üé®",
    skills: [
      { name: "React", level: 88 },
      { name: "React Native", level: 80 },
      { name: "Astro", level: 85 },
      { name: "HTML5 & CSS3", level: 95 },
      { name: "Tailwind CSS", level: 90 },
    ]
  },
  {
    title: "Base de Datos",
    icon: "üóÑÔ∏è",
    skills: [
      { name: "MySQL", level: 88 },
      { name: "PostgreSQL", level: 80 },
      { name: "Firebase", level: 75 },
      { name: "Prisma ORM", level: 85 },
    ]
  },
  {
    title: "Herramientas",
    icon: "üõ†Ô∏è",
    skills: [
      { name: "Git & GitHub", level: 90 },
      { name: "Docker", level: 70 },
      { name: "REST APIs", level: 92 },
      { name: "JWT & Auth", level: 88 },
    ]
  }
];

const techIcons = [
  { name: "Node.js", icon: "‚ö°" },
  { name: "React", icon: "‚öõÔ∏è" },
  { name: "TypeScript", icon: "üìò" },
  { name: "Python", icon: "üêç" },
  { name: "MySQL", icon: "üê¨" },
  { name: "Docker", icon: "üê≥" },
  { name: "NestJS", icon: "ü¶Å" },
  { name: "Firebase", icon: "üî•" },
];
---

<section class="skills section" id="skills">
  <div class="container">
    <div class="section-header reveal">
      <p class="section-subtitle">Mis Capacidades</p>
      <h2 class="section-title">Habilidades <span class="gradient-text">T√©cnicas</span></h2>
    </div>
    
    <div class="tech-carousel reveal">
      <div class="tech-track">
        {[...techIcons, ...techIcons].map((tech) => (
          <div class="tech-item">
            <span class="tech-icon">{tech.icon}</span>
            <span class="tech-name">{tech.name}</span>
          </div>
        ))}
      </div>
    </div>
    
    <div class="skills-grid stagger-children">
      {skillCategories.map((category) => (
        <div class="skill-category">
          <div class="category-header">
            <span class="category-icon">{category.icon}</span>
            <h3 class="category-title">{category.title}</h3>
          </div>
          <div class="skills-list">
            {category.skills.map((skill) => (
              <div class="skill-item">
                <div class="skill-info">
                  <span class="skill-name">{skill.name}</span>
                  <span class="skill-level">{skill.level}%</span>
                </div>
                <div class="skill-bar">
                  <div class="skill-progress" style={`--skill-level: ${skill.level}%`}></div>
                </div>
              </div>
            ))}
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  .skills { background: var(--color-dark); overflow: hidden; }
  .tech-carousel { margin-bottom: 4rem; overflow: hidden; mask-image: linear-gradient(90deg, transparent, black 10%, black 90%, transparent); }
  .tech-track { display: flex; gap: 3rem; animation: scroll-tech 30s linear infinite; width: max-content; }
  @keyframes scroll-tech { 0% { transform: translateX(0); } 100% { transform: translateX(-50%); } }
  .tech-item { display: flex; align-items: center; gap: 0.75rem; padding: 0.75rem 1.5rem; background: var(--color-dark-soft); border-radius: var(--radius-full); border: 1px solid var(--color-dark-muted); transition: all var(--transition-base); }
  .tech-item:hover { border-color: var(--color-primary); transform: scale(1.05); }
  .tech-icon { font-size: 1.5rem; }
  .tech-name { font-weight: 600; color: var(--color-text); }
  .skills-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 2rem; }
  .skill-category { background: var(--color-dark-soft); padding: 2rem; border-radius: var(--radius-xl); border: 1px solid var(--color-dark-muted); transition: all var(--transition-base); }
  .skill-category:hover { border-color: var(--color-primary); transform: translateY(-5px); box-shadow: var(--shadow-glow); }
  .category-header { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid var(--color-dark-muted); }
  .category-icon { font-size: 2rem; }
  .category-title { font-size: 1.25rem; font-weight: 700; color: var(--color-light); }
  .skills-list { display: flex; flex-direction: column; gap: 1rem; }
  .skill-info { display: flex; justify-content: space-between; margin-bottom: 0.5rem; }
  .skill-name { font-size: 0.9rem; font-weight: 500; color: var(--color-text); }
  .skill-level { font-size: 0.85rem; font-weight: 600; color: var(--color-primary); }
  .skill-bar { height: 8px; background: var(--color-dark); border-radius: var(--radius-full); overflow: hidden; }
  .skill-progress { height: 100%; background: var(--gradient-primary); border-radius: var(--radius-full); width: 0; transition: width 1.5s cubic-bezier(0.5, 0, 0, 1); }
  .skill-progress.animated { width: var(--skill-level); }
  @media (max-width: 900px) { .skills-grid { grid-template-columns: 1fr; } }
</style>

<script>
  const animateSkills = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.querySelectorAll('.skill-progress').forEach((bar, i) => {
          setTimeout(() => bar.classList.add('animated'), i * 50);
        });
        animateSkills.unobserve(entry.target);
      }
    });
  }, { threshold: 0.2 });
  const skillsGrid = document.querySelector('.skills-grid');
  if (skillsGrid) animateSkills.observe(skillsGrid);
</script>
