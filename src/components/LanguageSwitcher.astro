---
// Language Switcher Component
import { languages, getAlternateLang, getLocalizedPath, type Lang } from '../i18n/ui';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const alternateLang = getAlternateLang(lang);
const alternatePath = getLocalizedPath(alternateLang);
---

<div class="lang-switcher">
  <a 
    href={lang === 'es' ? '/' : '/'}
    class:list={["lang-btn", { active: lang === 'es' }]}
    aria-label="EspaÃ±ol"
  >
    ES
  </a>
  <span class="lang-divider">/</span>
  <a 
    href={lang === 'en' ? '/en/' : '/en/'}
    class:list={["lang-btn", { active: lang === 'en' }]}
    aria-label="English"
  >
    EN
  </a>
</div>

<style>
  .lang-switcher {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    padding: 0.375rem 0.75rem;
    background: var(--color-dark-soft);
    border: 1px solid var(--color-dark-muted);
    border-radius: var(--radius-full);
  }
  
  .lang-btn {
    font-size: 0.8rem;
    font-weight: 600;
    color: var(--color-text-muted);
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    transition: all var(--transition-fast);
  }
  
  .lang-btn:hover {
    color: var(--color-light);
  }
  
  .lang-btn.active {
    color: var(--color-primary);
    background: rgba(13, 148, 136, 0.1);
  }
  
  .lang-divider {
    color: var(--color-dark-muted);
    font-size: 0.8rem;
  }
</style>

<script>
  // Save language preference when user manually switches
  document.querySelectorAll('.lang-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const lang = btn.textContent?.trim().toLowerCase();
      if (lang === 'es' || lang === 'en') {
        localStorage.setItem('lang-preference', lang);
      }
    });
  });
</script>
